{{ define "body" }}

<body class="{{ if .Site.Params.backgroundImage }}background-image{{ end }}" {{ if .Site.Params.backgroundImage
    }}style="background-image: url('{{ .Site.Params.backgroundImage }}');" {{ end }}>
    {{ end }}

    {{ define "main" }}
    <div class="noise-overlay"></div>
    <div class="content-center">
        <main>
            <div class="hero-section">
                {{ if .Site.Params.Portrait.Path }}
                <img src="{{ .Site.Params.Portrait.Path }}" class="circle neon-border"
                    alt="{{ .Site.Params.Portrait.Alt }}" {{ if .Site.Params.Portrait.MaxWidth
                    }}style="max-width:{{ .Site.Params.Portrait.MaxWidth }}" {{ end }} />
                {{ end }}

                <h1 class="glitch-text" data-text="{{ .Site.Title }}">{{ .Site.Title }}</h1>

                {{ partial "subtitle.html" . }}

                {{- with .Site.Params.social }}
                <div class="social-icons">
                    {{ partial "social-icons.html" . }}
                </div>
                {{- end }}

                {{- if .Content }}
                <div class="home-content">
                    {{ .Content }}
                </div>
                {{- end }}
            </div>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const glitchText = document.querySelector('.glitch-text');
            if (!glitchText) return;

            function randomGlitch() {
                const minDelay = 100;
                const maxDelay = 2000;
                const delay = Math.random() * (maxDelay - minDelay) + minDelay;

                setTimeout(() => {
                    // Randomize transform
                    const x = (Math.random() - 0.5) * 10; // -5px to 5px
                    const y = (Math.random() - 0.5) * 5;  // -2.5px to 2.5px (bobbing)
                    const skew = (Math.random() - 0.5) * 20; // -10deg to 10deg

                    glitchText.style.transform = `translate(${x}px, ${y}px) skew(${skew}deg)`;

                    // Reset after short duration
                    setTimeout(() => {
                        glitchText.style.transform = 'none';
                        randomGlitch(); // Schedule next glitch
                    }, 50 + Math.random() * 100); // 50-150ms duration
                }, delay);
            }

            randomGlitch();
        });
    </script>
    {{ end }}